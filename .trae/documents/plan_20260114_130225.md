# 企业入驻表单后台系统开发方案（调整版）

## 一、部署调整说明

由于gitee pages只支持静态网站部署，不支持Node.js后端和数据库，我需要调整架构方案：

1. **前端**：部署到gitee pages（静态网站）
2. **后端API**：部署到支持Node.js的云平台（如Vercel、Render、腾讯云Serverless等）
3. **数据库**：使用MongoDB Atlas云数据库
4. **邮件服务**：使用第三方邮件服务（如SendGrid、阿里云邮件推送）

## 二、系统架构设计

### 1. 技术栈选择

* **前端**：
  - 表单页面：HTML/CSS/JavaScript（原有表单改造）
  - 后台管理：Vue.js + Element Plus
  - 部署：gitee pages

* **后端**：
  - Node.js + Express.js
  - 部署：Vercel/Render/Serverless

* **数据库**：MongoDB Atlas云数据库

* **邮件服务**：Nodemailer + 第三方SMTP服务

### 2. 系统模块划分

* 表单提交模块（静态页面）
* 后端API服务（云部署）
* MongoDB Atlas数据库
* 邮件发送模块
* 后台管理界面（静态页面，通过API与后端交互）

## 三、前端改造

1. **改造现有表单**：
   - 添加表单数据验证
   - 实现AJAX表单提交（调用后端API）
   - 添加文件上传功能
   - 显示提交状态反馈

2. **后台管理界面**：
   - 基于Vue.js + Element Plus开发
   - 表单列表展示（支持分页、筛选、排序）
   - 表单详情查看
   - 审核功能（单个审核、批量审核）
   - 配置管理（邮件模板）

## 四、后端API设计

### 1. 核心API端点

* `POST /api/form/submit` - 提交表单数据
* `GET /api/form/list` - 获取表单列表
* `GET /api/form/detail/:id` - 获取表单详情
* `POST /api/form/approve` - 审核表单（单个/批量）
* `GET /api/config/email` - 获取邮件配置
* `POST /api/config/email` - 更新邮件配置

### 2. 数据模型设计

保持原有数据模型设计不变，使用MongoDB Atlas存储数据。

## 五、开发计划

### 1. 第一阶段：后端服务开发

* 搭建Node.js + Express.js项目
* 实现MongoDB Atlas数据库连接
* 开发核心API端点
* 实现文件上传功能（文件存储到云存储或MongoDB GridFS）
* 开发邮件发送模块

### 2. 第二阶段：前端开发

* 改造现有表单，添加AJAX提交功能
* 开发Vue.js后台管理界面
* 实现前后端联调

### 3. 第三阶段：部署

* 前端部署到gitee pages
* 后端部署到云平台
* 配置MongoDB Atlas
* 配置邮件服务
* 测试完整流程

## 六、文件结构设计

```
企业入驻表单/
├── frontend/                  # 前端代码（部署到gitee pages）
│   ├── index.html             # 原有表单页面（改造后）
│   ├── admin/                 # 后台管理界面
│   │   ├── index.html
│   │   ├── src/
│   │   │   ├── main.js
│   │   │   ├── App.vue
│   │   │   ├── components/
│   │   │   ├── router/
│   │   │   └── services/
│   │   └── package.json
│   └── package.json
└── backend/                   # 后端代码（部署到云平台）
    ├── app.js
    ├── package.json
    ├── routes/
    ├── models/
    ├── controllers/
    ├── services/
    ├── middleware/
    └── config/
```

## 七、部署步骤

### 1. 前端部署到gitee pages

1. 将前端代码推送到gitee仓库
2. 在gitee仓库设置中开启pages服务
3. 配置pages服务：选择前端代码所在分支和目录
4. 部署完成后，即可通过gitee pages访问

### 2. 后端部署到云平台（以Vercel为例）

1. 将后端代码推送到GitHub/Gitee仓库
2. 在Vercel上导入仓库
3. 配置环境变量（数据库连接字符串、邮件服务配置等）
4. 部署完成后，Vercel会提供一个域名
5. 在前端代码中配置后端API域名

### 3. 数据库配置

1. 在MongoDB Atlas创建集群和数据库
2. 配置数据库用户和权限
3. 获取数据库连接字符串
4. 在后端环境变量中配置连接字符串

### 4. 邮件服务配置

1. 注册并配置第三方邮件服务
2. 获取SMTP配置信息
3. 在后端环境变量中配置SMTP信息
4. 在后台管理界面中配置邮件模板

## 八、注意事项

1. **跨域问题**：后端需要配置CORS，允许来自gitee pages的请求
2. **API域名**：前端代码中需要使用后端的完整域名
3. **环境变量**：敏感配置（如数据库连接字符串、邮件服务密码）必须通过环境变量配置，不能硬编码
4. **安全性**：后端API需要添加适当的认证和授权机制
5. **文件存储**：考虑到gitee pages的限制，文件需要存储到云存储服务或MongoDB GridFS

## 九、预期效果

1. 表单页面部署在gitee pages，用户可正常访问和提交表单
2. 表单数据通过API提交到后端，存储到MongoDB Atlas
3. 后台管理界面部署在gitee pages，通过API与后端交互
4. 支持表单审核功能（单个/批量）
5. 审核结果自动发送邮件通知
6. 邮件模板可自定义配置

## 十、调整后的开发时间估计

1. 后端服务开发：3-4天
2. 前端改造：2-3天
3. 后台管理界面：3-4天
4. 部署和测试：2-3天

总计：10-14天